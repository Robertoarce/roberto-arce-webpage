import{_ as g,o as a,c as l,a as s,F as c,r as p,e as f,w as y,v as x,t as d,n as h,f as w}from"./index-87adc6f9.js";const b={name:"ChatInterface",data(){return{messages:[],userInput:"",isLoading:!1,apiUrl:"http://localhost:8000/chat",apiKey:"i-know-i-will-forget-this-key",errorMessage:null}},methods:{handleKeyDown(t){t.key==="Enter"&&t.shiftKey&&!this.isLoading&&(t.preventDefault(),this.sendMessage())},async sendMessage(){if(!this.userInput.trim()||this.isLoading)return;const t={type:"user",text:this.userInput.trim(),timestamp:new Date};this.messages.push(t);const o=this.userInput.trim();this.userInput="",this.isLoading=!0,this.errorMessage=null;try{const r=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey,Accept:"application/json"},body:JSON.stringify({inputs:o})});if(!r.ok)throw new Error(`Server responded with ${r.status}`);const u=await r.json();this.messages.push({type:"bot",text:u.generated_text,timestamp:new Date})}catch(r){console.error("Error:",r),this.messages.push({type:"bot",text:`Sorry, I can't answer... the server is not connected. 
Ask Roberto to plug me in! ðŸ™„`,timestamp:new Date})}finally{this.isLoading=!1,this.$nextTick(()=>{this.scrollToBottom()})}},scrollToBottom(){const t=this.$refs.messagesContainer;t&&(t.scrollTop=t.scrollHeight)},formatTimestamp(t){return new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}).format(t)}},watch:{messages:{handler(){this.$nextTick(()=>{this.scrollToBottom()})},deep:!0}},mounted(){this.scrollToBottom()}},_={class:"h-screen bg-gray-700 p-10 flex flex-col overflow-auto"},v={ref:"messagesContainer",class:"flex-1 overflow-y-auto space-y-4 mb-4 text-2xl"},T={class:"flex items-start gap-3"},k={class:"text-white break-words whitespace-pre-wrap text-2xl"},I={class:"text-gray-400 text-sm mt-2 self-end"},D={key:0,class:"flex flex-col rounded-lg p-4 bg-gray-800 max-w-[80%] animate-pulse"},L={class:"flex items-start gap-3"},S=s("div",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-600"}," ðŸ¤– ",-1),C={class:"flex space-x-2"},K={class:"flex gap-4 mt-auto pb-20 relative"},M=["disabled"],B=["disabled"];function j(t,o,r,u,n,i){return a(),l("div",_,[s("div",v,[(a(!0),l(c,null,p(n.messages,(e,m)=>(a(),l("div",{key:m,class:h(["flex flex-col","rounded-lg p-4",e.type==="user"?"bg-blue-600 ml-auto":"bg-gray-800","max-w-[80%]","transition-all duration-200 ease-in-out","hover:shadow-lg"])},[s("div",T,[s("div",{class:h(["w-8 h-8 flex items-center justify-center rounded-full",e.type==="user"?"bg-blue-700":"bg-gray-600","transition-colors duration-200"])},d(e.type==="user"?"ðŸ¥¸":"ðŸ¤–"),3),s("div",k,d(e.text),1)]),s("div",I,d(i.formatTimestamp(e.timestamp)),1)],2))),128)),n.isLoading?(a(),l("div",D,[s("div",L,[S,s("div",C,[(a(),l(c,null,p(3,e=>s("span",{key:e,class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:w({animationDelay:`${(e-1)*100}ms`})},null,4)),64))])])])):f("",!0)],512),s("div",K,[y(s("textarea",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.userInput=e),onKeydown:o[1]||(o[1]=(...e)=>i.handleKeyDown&&i.handleKeyDown(...e)),placeholder:"Type your message... (Shift + Enter to send)",disabled:n.isLoading,class:"flex-1 rounded-lg bg-gray-800 text-white md:text-2xl placeholder-gray-400 p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",rows:"3"},null,40,M),[[x,n.userInput]]),s("button",{onClick:o[2]||(o[2]=(...e)=>i.sendMessage&&i.sendMessage(...e)),disabled:n.isLoading||!n.userInput.trim(),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ease-in-out flex items-center justify-center min-w-[100px]"},d(n.isLoading?"Sending...":"Send"),9,B)])])}const z=g(b,[["render",j]]);export{z as default};
