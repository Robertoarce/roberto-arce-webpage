import{o as e,f as s,g as t,F as a,q as n,v as i,z as o,A as r,t as l,x as d,B as u}from"./vendor-vue-1996cf52.js";import{_ as c}from"./art-components-021764e6.js";const p={class:"h-screen bg-gray-700 p-10 flex flex-col overflow-auto"},m={ref:"messagesContainer",class:"flex-1 overflow-y-auto space-y-4 mb-4 text-2xl"},g={class:"flex items-start gap-3"},h={class:"text-white break-words whitespace-pre-wrap text-2xl"},f={class:"text-gray-400 text-sm mt-2 self-end"},y={key:0,class:"flex flex-col rounded-lg p-4 bg-gray-800 max-w-[80%] animate-pulse"},x={class:"flex items-start gap-3"},w={class:"flex space-x-2"},b={class:"flex gap-4 mt-auto pb-20 relative"},v=["disabled"],T=["disabled"];const k=c({name:"ChatInterface",data:()=>({messages:[],userInput:"",isLoading:!1,apiUrl:"http://localhost:8000/chat",apiKey:"i-know-i-will-forget-this-key",errorMessage:null}),methods:{handleKeyDown(e){"Enter"===e.key&&e.shiftKey&&!this.isLoading&&(e.preventDefault(),this.sendMessage())},async sendMessage(){if(!this.userInput.trim()||this.isLoading)return;const e={type:"user",text:this.userInput.trim(),timestamp:new Date};this.messages.push(e);const s=this.userInput.trim();this.userInput="",this.isLoading=!0,this.errorMessage=null;try{const e=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey,Accept:"application/json"},body:JSON.stringify({inputs:s})});if(!e.ok)throw new Error(`Server responded with ${e.status}`);const t=await e.json();this.messages.push({type:"bot",text:t.generated_text,timestamp:new Date})}catch(t){this.messages.push({type:"bot",text:"Sorry, I can't answer... the server is not connected. \nAsk Roberto to plug me in! ðŸ™„",timestamp:new Date})}finally{this.isLoading=!1,this.$nextTick(()=>{this.scrollToBottom()})}},scrollToBottom(){const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)},formatTimestamp:e=>new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}).format(e)},watch:{messages:{handler(){this.$nextTick(()=>{this.scrollToBottom()})},deep:!0}},mounted(){this.scrollToBottom()}},[["render",function(c,k,I,D,L,j){return e(),s("div",p,[t("div",m,[(e(!0),s(a,null,n(L.messages,(a,n)=>(e(),s("div",{key:n,class:d(["flex flex-col","rounded-lg p-4","user"===a.type?"bg-blue-600 ml-auto":"bg-gray-800","max-w-[80%]","transition-all duration-200 ease-in-out","hover:shadow-lg"])},[t("div",g,[t("div",{class:d(["w-8 h-8 flex items-center justify-center rounded-full","user"===a.type?"bg-blue-700":"bg-gray-600","transition-colors duration-200"])},l("user"===a.type?"ðŸ¥¸":"ðŸ¤–"),3),t("div",h,l(a.text),1)]),t("div",f,l(j.formatTimestamp(a.timestamp)),1)],2))),128)),L.isLoading?(e(),s("div",y,[t("div",x,[k[3]||(k[3]=t("div",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-600"}," ðŸ¤– ",-1)),t("div",w,[(e(),s(a,null,n(3,e=>t("span",{key:e,class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:u({animationDelay:100*(e-1)+"ms"})},null,4)),64))])])])):i("",!0)],512),t("div",b,[o(t("textarea",{"onUpdate:modelValue":k[0]||(k[0]=e=>L.userInput=e),onKeydown:k[1]||(k[1]=(...e)=>j.handleKeyDown&&j.handleKeyDown(...e)),placeholder:"Type your message... (Shift + Enter to send)",disabled:L.isLoading,class:"flex-1 rounded-lg bg-gray-800 text-white md:text-2xl placeholder-gray-400 p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed",rows:"3"},null,40,v),[[r,L.userInput]]),t("button",{onClick:k[2]||(k[2]=(...e)=>j.sendMessage&&j.sendMessage(...e)),disabled:L.isLoading||!L.userInput.trim(),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 ease-in-out flex items-center justify-center min-w-[100px]"},l(L.isLoading?"Sending...":"Send"),9,T)])])}]]);export{k as default};
